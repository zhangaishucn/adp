# ------------------------------------
# components 定义
components:
  parameters:
    ID:
      name: id
      description: ID
      in: path
      schema:
        type: string
      required: true
    IDInt:
      name: id
      description: ID (int)
      in: path
      schema:
        type: integer
      required: true
    TplID:
      name: id
      description: 模板ID
      in: path
      schema:
        type: integer
      required: true
    IDsStr:
      name: ids
      description: ID列表
      in: query
      schema:
        type: array
        items:
          type: string
      required: false
    KEY:
      name: key
      description: 对象的标识（key）
      in: path
      schema:
        type: string
      required: true
    agentKey:
      name: agent_key
      description: data agent key
      in: path
      schema:
        type: string
      required: true
    page:
      name: page
      description: 分页页码
      in: query
      schema:
        type: integer
        default: 1
      required: false
    pageLimit:
      name: size
      description: 每页返回条数
      in: query
      schema:
        type: integer
        default: 10
      required: false
    name:
      name: name
      description: 根据名称模糊查询
      in: query
      schema:
        type: string
      required: false
    lastID:
      name: last_id
      description: | 
        - 最后一个ID
        - 用于分页，获取下一页数据
      in: query
      schema:
        type: integer
      required: false
    customSpaceID:
      name: custom_space_id
      description: 自定义空间ID（如果不是自定义空间，传空。 如广场）
      in: query
      schema:
        type: string
      required: false
    toBeFlag:
      name: publish_to_be
      description: 发布为标识("api_agent", "web_sdk_agent", "skill_agent", "data_flow_agent")
      in: query
      schema:
        type: string
        enum: ["api_agent", "web_sdk_agent", "skill_agent", "data_flow_agent"]
      required: false
    categoryID:
      name: category_id
      description: 分类ID
      in: query
      schema:
        type: string
      required: false
    publishStatus:
      name: publish_status
      description: 发布状态("unpublished", "published")
      in: query
      schema:
        type: string
      required: false
    agentVersionRequiredPath:
      name: agent_version
      description: agent版本
      in: path
      schema:
        type: string
      required: true
    agentIDRequiredPath:
      name: agent_id
      description: agent ID
      in: path
      schema:
        type: string
      required: true
    agentCreatedType:
      name: agent_created_type
      description: | 
        - agent创建类型
        - create: 手动创建
        - copy: 从其他Agent复制
      in: query
      schema:
        type: string
        enum: ["create", "copy"]
      required: false
    agentTplCreatedType:
      name: agent_tpl_created_type
      description: | 
        - agent模板创建类型
        - copy_from_agent: 从agent复制
        - copy_from_tpl: 从模板复制
      in: query
      schema:
        type: string
        enum: ["copy_from_agent", "copy_from_tpl"]
      required: false
  responses:
    '400':
      description: 错误的请求
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    '401':
      description: 认证失败
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    '403':
      description: 请求被拒绝
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    '404':
      description: 资源不存在
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    '409':
      description: 资源冲突
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    '500':
      description: 内部错误
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    502:
      description: 网关错误
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
  schemas:
    Error:
      required:
        - error_code
        - description
        - solution
        - error_link
        - error_details
      type: object
      description: 错误信息（统一格式）
      properties:
        error_code:
          type: string
          description: 业务错误码
        description:
          type: string
          description: 错误描述
        solution:
          type: string
          description: 解决方法
        error_link:
          type: string
          description: 错误链接
        error_details:
          description: |
            - 错误详情（比如当某些数据不存在时，这里可以包含不存在的id）
            - 任意类型
          type:
            - object
            - "null"
            - array
            - string
            - number
            - boolean
          nullable: true
    CategoryResp:
      type: object
      properties:
        category_id:
          type: string
          description: 分类ID
        categroy_name:
          type: string
          description: 分类名称
      required:
        - category_id
        - categroy_name
      description: 分类
    ReleaseHistoryListItemResp:
      type: object
      properties:
        history_id:
          type: string
          description: 发布历史 ID
        agent_id:
          type: string
          description: agent ID
        agent_version:
          type: string
          description: agent版本
        agent_desc:
          type: string
          description: agent描述
        create_time:
          type: string
          description: 创建时间
      required:
        - category_id
        - categroy_name
      description: 发布历史

    ReleaseHistoryInfoResp:
      type: object
      properties:
        history_id:
          type: string
          description: 发布历史 ID
        agent_id:
          type: string
          description: agent ID
        agent_config:
          type: object
          description: agent配置
        agent_version:
          type: string
          description: agent版本
        agent_desc:
          type: string
          description: agent描述
        create_time:
          type: string
          description: 创建时间
      required:
        - category_id
        - categroy_name
      description: 发布历史

    AgentListResp:
      type: object
      properties:
        id:
          type: string
          description: agent id
          example: xxx
        key:
          type: string
          description: agent 标识
          example: xxx
        is_built_in:
          type: integer
          enum: [0, 1]
          description: |
            - 是否内置
              - 0: 否
              - 1: 是
          example: 0
        name:
          type: string
          description: 名字
          example: agent1
        profile:
          type: string
          description: agent 简介
          example: agent1 profile
        avatar_type:
          type: integer
          description: |
            - 头像类型
              - 1: 内置头像
              - 2: 用户上传头像
              - 3: AI生成头像
          example: 1
        avatar:
          type: string
          description: |
            - 头像信息
              - 当头像类型为1时，为内置头像标识(如1-10等)
              - 当头像类型为2时，为头像存储信息
              - 当头像类型为3时，为头像存储信息
          example: 1
        config:
          $ref: '../agent/schema/config_req.yaml#/config'
          title: agent配置
        product_key:
          type: string
          description: 所属产品key
          example: dip
        product_name:
          type: string
          description: 所属产品名称
          example: DIP
    AgentMarketMyAgentResp:
      type: object
      properties:
        id:
          type: string
          description: agent id
          example: xxx
        key:
          type: string
          description: agent 标识
          example: xxx
        is_built_in:
          type: integer
          enum: [0, 1]
          description: |
            - 是否内置
              - 0: 否
              - 1: 是
          example: 0
        name:
          type: string
          description: 名字
          example: agent1
        profile:
          type: string
          description: agent 简介
          example: agent1 profile
        category_id:
          type: string
          description: 分类ID
        categroy_name:
          type: string
          description: 分类名称
        description:
          type: string
          description: 发布描述
          example: agent1 description
        version:
          type: string
          description: agent版本
        avatar_type:
          type: integer
          description: |
            - 头像类型
              - 1: 内置头像
              - 2: 用户上传头像
              - 3: AI生成头像
          example: 1
        avatar:
          type: string
          description: |
            - 头像信息
              - 当头像类型为1时，为内置头像标识(如1-10等)
              - 当头像类型为2时，为头像存储信息
              - 当头像类型为3时，为头像存储信息
          example: 1
        product_key:
          type: string
          description: 所属产品标识
          example: dip
        product_name:
          type: string
          description: 所属产品名称
          example: DIP 
        update_time:
          type: string
          description: 最近更新时间
        status:
          type: string
          enum: [unpublished, published]
          description: |
            - 状态
              - unpublished: 未发布
              - published: 已发布
          example: unpublished 

    AgentMarketAgentInfoResp:
      type: object
      properties:
        id:
          type: string
          description: agent id
          example: xxx
        key:
          type: string
          description: agent 标识
          example: xxx
        is_built_in:
          type: integer
          enum: [0, 1]
          description: |
            - 是否内置
              - 0: 否
              - 1: 是
          example: 0
        name:
          type: string
          description: 名字
          example: agent1
        profile:
          type: string
          description: agent 简介
          example: agent1 profile
        category_id:
          type: string
          description: 分类ID
        categroy_name:
          type: string
          description: 分类名称
        description:
          type: string
          description: 发布描述
          example: agent1 description
        version:
          type: string
          description: agent版本
        latest_version:
          type: string
          description: agent最新版本
        config:
          $ref: '../agent/schema/config_req.yaml#/config'
          title: agent配置
        avatar_type:
          type: integer
          description: |
            - 头像类型
              - 1: 内置头像
              - 2: 用户上传头像
              - 3: AI生成头像
          example: 1
        avatar:
          type: string
          description: |
            - 头像信息
              - 当头像类型为1时，为内置头像标识(如1-10等)
              - 当头像类型为2时，为头像存储信息
              - 当头像类型为3时，为头像存储信息
          example: 1
        product_key:
          type: string
          description: 所属产品标识
          example: dip
        product_name:
          type: string
          description: 所属产品名称
          example: DIP
        publish_user_info:
          type: object
          description: 发布者信息
          properties:
            user_id:
              type: string
              description: 用户id
              example: xxx
            username:
              type: string
              description: 用户显示名
              example: xxx
        publish_time:
          type: integer
          description: 发布时间（时间戳，单位：ms）
        publish_info:
          $ref: './schema/list_publish_info.yaml#/list_publish_info'
      
  securitySchemes: {}
