{
  "openapi": "3.0.2",
  "info": {
    "title": "DIP算子服务公有接口协议",
    "version": "1.0.0",
    "description": "DIP算子服务公有接口协议RESTful API集合,用于集群外部服务调用, 需接口认证信息"
  },
  "servers": [
    {
      "url": "http://{{host}}:{{port}}",
      "description": "DIP算子服务公有接口协议接口地址"
    }
  ],
  "paths": {
    "/api/agent-operator-integration/v1/operator/register": {
      "post": {
        "summary": "注册算子",
        "description": "注册算子",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Bearer token",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OperatorRegisterReq"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OperatorRegisterResp"
                }
              }
            }
          },
          "400": {
            "description": "参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "无权限",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "409": {
            "description": "算子已存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "内部错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/agent-operator-integration/v1/operator/info/update": {
      "post": {
        "summary": "更新算子信息",
        "description": "更新算子信息",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "required": [
                  "operator_id",
                  "version"
                ],
                "allOf": [
                  {
                    "properties": {
                      "operator_id": {
                        "type": "string",
                        "description": "算子ID"
                      },
                      "version": {
                        "type": "string",
                        "description": "算子名称"
                      }
                    }
                  },
                  {
                    "$ref": "#/components/schemas/OperatorRegisterReq"
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OperatorRegisterResp"
                }
              }
            }
          },
          "400": {
            "description": "参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "无权限",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "409": {
            "description": "算子已存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "内部错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/agent-operator-integration/v1/operator/info/list": {
      "get": {
        "summary": "获取算子列表",
        "description": "获取算子列表",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Bearer token",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "页码，从1开始，默认为1",
            "schema": {
              "type": "integer",
              "default": 1,
              "minimum": 1
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "description": "每页数量，默认为10，最大为100，当page_size为-1时，返回所有算子信息",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10,
              "maximum": 100
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "description": "排序字段，支持按创建时间、更新时间、名称排序",
            "schema": {
              "type": "string",
              "enum": [
                "create_time",
                "update_time",
                "name"
              ],
              "default": "update_time"
            }
          },
          {
            "name": "sort_order",
            "in": "query",
            "description": "排序规则",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            }
          },
          {
            "name": "operator_id",
            "in": "query",
            "description": "根据算子ID查询，返回所有版本的算子信息，默认根据更新时间排序，desc",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "description": "根据创建用户查询,默认根据更新时间排序，desc",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "name",
            "in": "query",
            "description": "根据算子名称查询，返回所有版本的算子信息，默认根据更新时间排序，desc",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "version",
            "in": "query",
            "description": "根据算子版本查询，返回指定版本的算子信息，支持模糊查询，默认根据更新时间排序，desc",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "根据算子状态查询，返回所有版本的算子信息，默认根据更新时间排序，desc",
            "schema": {
              "type": "string",
              "enum": [
                "unpublish",
                "published",
                "offline"
              ]
            }
          },
          {
            "name": "category",
            "in": "query",
            "description": "根据算子分类查询，返回所有版本的算子信息",
            "schema": {
              "type": "string",
              "default": "other_category",
              "enum": [
                "other_category",
                "data_process",
                "data_transform",
                "data_store",
                "data_analysis",
                "data_query",
                "data_extract",
                "data_split",
                "model_train"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OperatorDataInfoList"
                }
              }
            }
          },
          "400": {
            "description": "参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "算子不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "内部错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/agent-operator-integration/v1/operator/info/{operator_id}": {
      "get": {
        "summary": "获取算子信息",
        "description": "获取算子信息",
        "parameters": [
          {
            "name": "operator_id",
            "in": "path",
            "description": "算子ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "version",
            "in": "query",
            "description": "算子版本",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OperatorDataInfo"
                }
              }
            }
          },
          "400": {
            "description": "参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "算子不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "内部错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/agent-operator-integration/v1/operator/info": {
      "post": {
        "summary": "编辑算子",
        "description": "编辑指定算子的信息",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OperatorEditReq"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OperatorStatusItem"
                }
              }
            }
          },
          "400": {
            "description": "参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "算子不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "内部错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/agent-operator-integration/v1/operator/category": {
      "get": {
        "summary": "获取算子分类",
        "description": "获取算子分类列表",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Bearer token",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "category_type": {
                        "type": "string",
                        "description": "分类类型",
                        "enum": [
                          "other_category",
                          "data_process",
                          "data_transform",
                          "data_store",
                          "data_analysis",
                          "data_query",
                          "data_extract",
                          "data_split",
                          "model_train"
                        ]
                      },
                      "name": {
                        "type": "string",
                        "description": "分类名称，支持国际化"
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "内部错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/agent-operator-integration/v1/operator/delete": {
      "delete": {
        "summary": "删除算子",
        "description": "删除指定的算子",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Bearer token",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OperatorDeleteReq"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "删除成功"
          },
          "400": {
            "description": "参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "算子不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "内部服务器错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/agent-operator-integration/v1/operator/status": {
      "post": {
        "summary": "更新算子状态",
        "description": "更新指定算子的状态",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Bearer token",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OperatorStatusUpdateReq"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "状态更新成功"
          },
          "400": {
            "description": "参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "算子不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "409": {
            "description": "状态转换冲突",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "内部服务器错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/agent-operator-integration/v1/operator/debug": {
      "post": {
        "summary": "调试算子",
        "description": "调试指定算子",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Bearer token",
            "required": true,
            "schema": {
              "type": "string",
              "example": "Bearer <token>"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OperatorDebugReq"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "调试成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OperatorDebugResp"
                }
              }
            }
          },
          "400": {
            "description": "参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "算子不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "内部服务器错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Error": {
        "type": "object",
        "description": "错误信息",
        "properties": {
          "code": {
            "type": "string",
            "description": "错误码"
          },
          "description": {
            "type": "string",
            "description": "错误信息"
          },
          "detail": {
            "type": "object",
            "description": "错误详情"
          },
          "solution": {
            "type": "string",
            "description": "错误解决方案"
          },
          "link": {
            "type": "string",
            "description": "错误链接"
          }
        }
      },
      "OperatorDataInfoList": {
        "type": "object",
        "description": "算子信息列表",
        "properties": {
          "total": {
            "type": "integer",
            "description": "总记录数"
          },
          "page": {
            "type": "integer",
            "description": "当前页码"
          },
          "page_size": {
            "type": "integer",
            "description": "每页记录数"
          },
          "total_pages": {
            "type": "integer",
            "description": "总页数"
          },
          "has_next": {
            "type": "boolean",
            "description": "是否有下一页"
          },
          "has_prev": {
            "type": "boolean",
            "description": "是否有上一页"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/OperatorDataInfo"
            }
          }
        }
      },
      "OperatorDataInfoOpenAPI": {
        "type": "object",
        "description": "openapi类型元数据",
        "properties": {
          "summary": {
            "type": "string",
            "description": "摘要"
          },
          "path": {
            "type": "string",
            "description": "路径"
          },
          "method": {
            "type": "string",
            "description": "方法"
          },
          "description": {
            "type": "string",
            "description": "描述"
          },
          "server_url": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "服务器地址"
            }
          },
          "api_spec": {
            "type": "object",
            "properties": {
              "parameters": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string",
                      "description": "参数名称"
                    },
                    "in": {
                      "type": "string",
                      "description": "参数位置，如path/query/header/cookie"
                    },
                    "description": {
                      "type": "string",
                      "description": "参数描述"
                    },
                    "required": {
                      "type": "boolean",
                      "default": false
                    },
                    "schema": {
                      "$ref": "#/components/schemas/ParameterSchema"
                    }
                  }
                }
              },
              "request_body": {
                "type": "object",
                "properties": {
                  "description": {
                    "type": "string",
                    "description": "请求体描述"
                  },
                  "required": {
                    "type": "boolean",
                    "default": false
                  },
                  "content": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "object",
                      "properties": {
                        "schema": {
                          "$ref": "#/components/schemas/ExampleRequest"
                        },
                        "example": {
                          "$ref": "#/components/schemas/ExampleRequest"
                        }
                      }
                    }
                  }
                }
              },
              "responses": {
                "type": "object",
                "additionalProperties": {
                  "type": "object",
                  "properties": {
                    "description": {
                      "type": "string",
                      "description": "响应描述"
                    },
                    "content": {
                      "type": "object",
                      "additionalProperties": {
                        "type": "object",
                        "properties": {
                          "schema": {
                            "$ref": "#/components/schemas/ExampleResponse"
                          },
                          "example": {
                            "$ref": "#/components/schemas/ExampleResponse"
                          }
                        }
                      }
                    }
                  }
                }
              },
              "schemas": {
                "type": "object",
                "additionalProperties": {
                  "$ref": "#/components/schemas/ParameterSchema"
                }
              },
              "security": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "securityScheme": {
                      "type": "string",
                      "enum": [
                        "apiKey",
                        "http",
                        "oauth2"
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "ParameterSchema": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "string",
              "number",
              "integer",
              "boolean",
              "array"
            ]
          },
          "format": {
            "type": "string",
            "enum": [
              "int32",
              "int64",
              "float",
              "double",
              "byte"
            ]
          },
          "example": {
            "type": "string"
          }
        }
      },
      "ExampleRequest": {
        "type": "object",
        "properties": {
          "field1": {
            "type": "string",
            "example": "sample_value"
          },
          "field2": {
            "type": "integer",
            "format": "int32",
            "example": 123
          }
        }
      },
      "ExampleResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "format": "int32",
            "example": 200
          },
          "data": {
            "type": "object",
            "properties": {
              "result": {
                "type": "string",
                "example": "success"
              }
            }
          }
        }
      },
      "OperatorEditReq": {
        "type": "object",
        "description": "算子编辑请求",
        "required": [
          "operator_id",
          "version"
        ],
        "properties": {
          "operator_id": {
            "type": "string",
            "description": "算子ID"
          },
          "version": {
            "type": "string",
            "description": "算子版本"
          },
          "name": {
            "type": "string",
            "description": "算子名称"
          },
          "operator_info": {
            "$ref": "#/components/schemas/OperatorInfoEdit"
          },
          "operator_execute_control": {
            "$ref": "#/components/schemas/OperatorExecuteControl"
          },
          "extend_info": {
            "type": "object",
            "description": "扩展信息"
          },
          "metadata": {
            "type": "object",
            "description": "算子元数据，如果如要修改元数据，所有参数都需要填写",
            "properties": {
              "openapi": {
                "$ref": "#/components/schemas/OperatorDataInfoOpenAPI"
              }
            }
          }
        }
      },
      "OperatorDataInfo": {
        "type": "object",
        "required": [
          "operator_id",
          "version"
        ],
        "description": "算子信息",
        "properties": {
          "name": {
            "type": "string",
            "description": "算子名称"
          },
          "operator_id": {
            "type": "string",
            "description": "算子ID"
          },
          "version": {
            "type": "string",
            "description": "算子版本"
          },
          "status": {
            "type": "string",
            "description": "算子状态",
            "enum": [
              "unpublish",
              "published",
              "offline"
            ]
          },
          "metadata_type": {
            "type": "string",
            "description": "算子元数据类型",
            "enum": [
              "openapi"
            ]
          },
          "metadata": {
            "type": "object",
            "description": "算子元数据",
            "properties": {
              "openapi": {
                "$ref": "#/components/schemas/OperatorDataInfoOpenAPI"
              }
            }
          },
          "operator_info": {
            "$ref": "#/components/schemas/OperatorInfo"
          },
          "operator_execute_control": {
            "$ref": "#/components/schemas/OperatorExecuteControl"
          },
          "extend_info": {
            "type": "object",
            "description": "扩展信息"
          },
          "create_time": {
            "type": "integer",
            "description": "创建时间"
          },
          "update_time": {
            "type": "integer",
            "description": "更新时间"
          },
          "create_user": {
            "type": "string",
            "description": "创建用户"
          },
          "update_user": {
            "type": "string",
            "description": "更新用户"
          }
        }
      },
      "OperatorRegisterReq": {
        "type": "object",
        "description": "算子注册请求",
        "required": [
          "data",
          "operator_metadata_type"
        ],
        "properties": {
          "data": {
            "type": "string",
            "description": "算子数据"
          },
          "operator_metadata_type": {
            "type": "string",
            "description": "算子元数据类型",
            "enum": [
              "openapi"
            ]
          },
          "operator_info": {
            "$ref": "#/components/schemas/OperatorInfo"
          },
          "operator_execute_control": {
            "$ref": "#/components/schemas/OperatorExecuteControl"
          },
          "extend_info": {
            "type": "object",
            "description": "算子拓展信息"
          },
          "direct_publish": {
            "type": "boolean",
            "description": "是否直接发布算子"
          },
          "user_token": {
            "type": "string",
            "description": "内部接口传参，用于认证用户身份"
          }
        }
      },
      "OperatorRegisterResp": {
        "type": "array",
        "items": {
          "type": "object",
          "required": [
            "status"
          ],
          "properties": {
            "status": {
              "type": "string",
              "description": "算子状态",
              "enum": [
                "success",
                "failed"
              ]
            },
            "operator_id": {
              "type": "string",
              "description": "算子ID"
            },
            "version": {
              "type": "string",
              "description": "算子版本"
            },
            "error": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "OperatorInfoEdit": {
        "type": "object",
        "description": "算子信息",
        "properties": {
          "operator_type": {
            "type": "string",
            "description": "basic: 基础算子, composite: 组合算子, 默认为basic",
            "default": "basic",
            "enum": [
              "basic",
              "composite"
            ]
          },
          "execution_mode": {
            "type": "string",
            "description": "sync: 同步执行, async: 异步执行, 默认为sync",
            "default": "sync",
            "enum": [
              "sync",
              "async"
            ]
          },
          "category": {
            "type": "string",
            "description": "算子分类，默认为other_category（其他/数据处理/数据转换/数据存储/数据分析/数据查询/数据抽取/数据分割/模型训练）",
            "default": "other_category",
            "enum": [
              "other_category",
              "data_process",
              "data_transform",
              "data_store",
              "data_analysis",
              "data_query",
              "data_extract",
              "data_split",
              "model_train"
            ]
          },
          "source": {
            "type": "string",
            "description": "算子来源, 默认为unknown, 可选值为system/unknown, 如果是system不允许修改",
            "default": "unknown",
            "enum": [
              "system",
              "unknown"
            ]
          }
        }
      },
      "OperatorInfo": {
        "type": "object",
        "description": "算子信息",
        "properties": {
          "operator_type": {
            "type": "string",
            "description": "basic: 基础算子, composite: 组合算子, 默认为basic",
            "default": "basic",
            "enum": [
              "basic",
              "composite"
            ]
          },
          "execution_mode": {
            "type": "string",
            "description": "sync: 同步执行, async: 异步执行, 默认为sync",
            "default": "sync",
            "enum": [
              "sync",
              "async"
            ]
          },
          "category": {
            "type": "string",
            "description": "算子分类，默认为other_category（其他/数据处理/数据转换/数据存储/数据分析/数据查询/数据抽取/数据分割/模型训练）",
            "default": "other_category",
            "enum": [
              "other_category",
              "data_process",
              "data_transform",
              "data_store",
              "data_analysis",
              "data_query",
              "data_extract",
              "data_split",
              "model_train"
            ]
          },
          "category_name": {
            "type": "string",
            "description": "算子分类名称"
          },
          "source": {
            "type": "string",
            "description": "算子来源, 默认为unknown, 可选值为system/unknown, 如果是system不允许修改",
            "default": "unknown",
            "enum": [
              "system",
              "unknown"
            ]
          }
        }
      },
      "OperatorExecuteControl": {
        "type": "object",
        "description": "算子执行控制",
        "properties": {
          "timeout": {
            "type": "integer",
            "description": "超时时间（毫秒）"
          },
          "retry_policy": {
            "type": "object",
            "description": "重试策略",
            "properties": {
              "max_attempts": {
                "type": "integer",
                "description": "最大重试次数",
                "default": 3
              },
              "initial_delay": {
                "type": "integer",
                "description": "初始延迟时间(毫秒)",
                "default": 1000
              },
              "max_delay": {
                "type": "integer",
                "description": "最大延迟时间(毫秒)",
                "default": 6000
              },
              "backoff_factor": {
                "type": "integer",
                "description": "退避因子",
                "default": 2
              },
              "retry_conditions": {
                "type": "object",
                "description": "重试条件",
                "properties": {
                  "status_code": {
                    "type": "array",
                    "description": "HTTP状态码",
                    "items": {
                      "type": "integer"
                    }
                  },
                  "error_codes": {
                    "type": "array",
                    "description": "异常类型",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "OperatorDeleteItem": {
        "type": "object",
        "required": [
          "operator_id",
          "version"
        ],
        "properties": {
          "operator_id": {
            "type": "string",
            "description": "算子ID",
            "example": "op-123456"
          },
          "version": {
            "type": "string",
            "description": "算子版本",
            "example": "1.0.0"
          }
        }
      },
      "OperatorDeleteReq": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/OperatorDeleteItem"
        },
        "description": "算子删除请求",
        "example": [
          {
            "operator_id": "op-123456",
            "version": "1.0.0"
          },
          {
            "operator_id": "op-789012",
            "version": "2.1.0"
          }
        ]
      },
      "OperatorStatusItem": {
        "type": "object",
        "required": [
          "operator_id",
          "version",
          "status"
        ],
        "properties": {
          "operator_id": {
            "type": "string",
            "description": "算子ID",
            "example": "op-123456"
          },
          "version": {
            "type": "string",
            "description": "算子版本",
            "example": "1.0.0"
          },
          "status": {
            "type": "string",
            "description": "算子状态",
            "enum": [
              "unpublish",
              "published",
              "offline"
            ],
            "example": "published"
          }
        }
      },
      "OperatorStatusUpdateReq": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/OperatorStatusItem"
        },
        "description": "算子状态更新请求",
        "example": [
          {
            "operator_id": "op-123456",
            "version": "1.0.0",
            "status": "published"
          },
          {
            "operator_id": "op-789012",
            "version": "2.1.0",
            "status": "offline"
          }
        ]
      },
      "OperatorDebugReq": {
        "type": "object",
        "description": "算子调试请求",
        "required": [
          "operator_id",
          "version"
        ],
        "properties": {
          "operator_id": {
            "type": "string",
            "description": "算子ID"
          },
          "version": {
            "type": "string",
            "description": "算子版本"
          },
          "header": {
            "type": "object",
            "description": "请求头",
            "additionalProperties": true
          },
          "body": {
            "type": "object",
            "description": "请求体"
          },
          "query": {
            "type": "object",
            "description": "Query中的请求参数",
            "additionalProperties": true
          },
          "path": {
            "type": "object",
            "description": "Path中的请求参数",
            "additionalProperties": true
          }
        }
      },
      "OperatorDebugResp": {
        "type": "object",
        "description": "算子调试响应",
        "properties": {
          "status_code": {
            "type": "integer",
            "description": "HTTP状态码",
            "example": 200
          },
          "headers": {
            "type": "object",
            "description": "响应头",
            "additionalProperties": true
          },
          "body": {
            "type": "object",
            "description": "响应体"
          },
          "error": {
            "type": "string",
            "description": "错误信息"
          },
          "duration_ms": {
            "type": "integer",
            "description": "处理时间（毫秒）"
          }
        }
      }
    }
  }
}
