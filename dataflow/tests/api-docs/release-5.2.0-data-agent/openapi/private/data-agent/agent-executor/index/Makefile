.default: executor_private_html

# å®šä¹‰å˜é‡
OPENAPI_CLI = redocly
OPENAPI_YAML = agent-executor.yaml
HTML_OUTPUT = agent-executor.html

OPENAPI_JSON = agent-executor.json

# é»˜è®¤ç›®æ ‡
.PHONY: all
all: executor_private_html

# ç”ŸæˆHTMLæ–‡æ¡£
.PHONY: executor_private_html
executor_private_html:
	$(OPENAPI_CLI) build-docs $(OPENAPI_YAML) -o $(HTML_OUTPUT);open $(HTML_OUTPUT)
	make yaml2json

yaml2json:
	$(OPENAPI_CLI) bundle $(OPENAPI_YAML) -o $(OPENAPI_JSON)

json2yaml:
	$(OPENAPI_CLI) bundle $(OPENAPI_JSON) -o $(OPENAPI_YAML)

preview:
	@echo "æ­£åœ¨å¯åŠ¨ API æ–‡æ¡£é¢„è§ˆæœåŠ¡å™¨(æ”¯æŒçƒ­é‡è½½)..."
	@echo "æµè§ˆå™¨å°†è‡ªåŠ¨æ‰“å¼€ http://127.0.0.1:8080"
	@echo "ğŸ‘€ ç›‘å¬æ–‡ä»¶å˜åŒ– - ä»»ä½•ä¿®æ”¹éƒ½ä¼šè‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­é‡æ–°åŠ è½½"
	@echo "æŒ‰ Ctrl+C åœæ­¢æœåŠ¡å™¨"
	@open http://127.0.0.1:8080 &
	@npx --yes @redocly/cli@1 preview-docs $(OPENAPI_YAML) --port 8080

