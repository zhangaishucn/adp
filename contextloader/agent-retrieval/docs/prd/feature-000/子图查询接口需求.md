# 需求：代理子图查询接口

## 目标
在当前服务中代理本体查询服务的子图查询接口，统一对外提供服务，便于 Agent/大模型调用。

## 接口信息

### 代理接口
- **路由**: `POST /kn/query_instance_subgraph`
- **目标接口**: `POST /api/ontology-query/in/v1/knowledge-networks/{kn_id}/subgraph`

### 功能说明
基于关系路径查询知识图谱中的对象子图：
- 支持多条路径查询，每条路径返回独立子图
- 对象以 map 形式返回
- 支持过滤条件和排序

### 请求参数
- **Path**: `kn_id` (知识网络ID)
- **Query**:
  - `include_logic_params` (boolean, 默认 false)
  - `query_type` (string, 默认 "relation_path")
- **Header**:
  - `x-account-id` (必需)
  - `x-account-type` (必需)
  - `X-HTTP-Method-Override: GET` (实际是 GET，但用 POST 调用)
- **Body**: `SubGraphQueryBaseOnTypePath`
  - `relation_type_paths`: 关系路径数组

### 响应结构
- `entries`: 子图数组
  - `objects`: 对象 map (key=对象ID, value=对象信息)
  - `relation_paths`: 关系路径集合
  - `total_count`: 起点对象总数
  - `search_after`: 分页标记

## 特殊要求
1. **错误信息优化**: 错误信息需包装成大模型可理解的内容
2. **未来扩展**: 可能封装成 MCP Server 对外提供服务
