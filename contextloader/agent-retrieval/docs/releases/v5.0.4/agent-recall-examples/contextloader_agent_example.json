{
  "agents": [
    {
      "id": "01KDCK0WD3ZBCZCD4417Q1NFX1",
      "name": "contextloader使用示例",
      "key": "01KDCK0WD5VBSAHCQ4451B9CG6",
      "profile": "在data agent中的使用contextloader示例",
      "product_key": "chatbi",
      "avatar_type": 1,
      "avatar": "1",
      "status": "unpublished",
      "is_built_in": 0,
      "is_system_agent": 0,
      "created_at": 1766727905701,
      "updated_at": 1767591245181,
      "created_by": "bdb78b62-6c48-11f0-af96-fa8dcc0a06b2",
      "updated_by": "bdb78b62-6c48-11f0-af96-fa8dcc0a06b2",
      "deleted_at": 0,
      "deleted_by": "",
      "config": "{\"input\":{\"fields\":[{\"name\":\"query\",\"type\":\"string\",\"desc\":\"\"},{\"name\":\"history\",\"type\":\"object\",\"desc\":\"\"},{\"name\":\"tool\",\"type\":\"object\",\"desc\":\"\"},{\"name\":\"header\",\"type\":\"object\",\"desc\":\"\"},{\"name\":\"self_config\",\"type\":\"object\",\"desc\":\"\"}],\"rewrite\":{\"enable\":false,\"llm_config\":{\"id\":\"\",\"name\":\"test\",\"model_type\":\"llm\",\"temperature\":0.5,\"top_p\":0.5,\"top_k\":0,\"frequency_penalty\":0,\"presence_penalty\":0,\"max_tokens\":1000}},\"augment\":{\"enable\":false,\"data_source\":{\"kg\":[]}},\"is_temp_zone_enabled\":0,\"temp_zone_config\":null},\"system_prompt\":\"\",\"dolphin\":\"@kn_search(query=$query) -\\u003e schema\\r\\n\\r\\n/explore/(history=true)\\r\\n你是一个业务知识网络的问答专家，请根据提供的几个工具，回答问题。\\r\\n\\r\\n【schema】\\r\\n$schema\\r\\n\\r\\n【get_action_info工具使用】\\r\\n可以根据行动类ID和对象实例信息获取绑定的行动信息，用于实现工具的动态调用。\\r\\n1、行动类ID需要从Schema信息中获取\\r\\n2、什么是行动信息，行动信息是可以获取用于执行相关操作的工具，比如“加入人才库”\\r\\n\\r\\n【严格要求】\\r\\n1、每调用一个工具之前，简略说明一下为什么要调用这个工具\\r\\n2、每次调用一个工具之后，做一个简单的推理总结\\r\\n3、严格并且必须基于业务知识网络中的内容回答，禁止无依据回答\\r\\n\\r\\n【问题】\\r\\n```\\r\\n$query\\r\\n```\\r\\n-\\u003e answer\",\"is_dolphin_mode\":1,\"pre_dolphin\":[{\"key\":\"context_organize\",\"name\":\"上下文组织模块\",\"value\":\"\\n{\\\"query\\\": \\\"用户的问题为: \\\"+$query} -\\u003e context\\n\",\"enabled\":false,\"edited\":false}],\"post_dolphin\":[],\"data_source\":{\"kg\":[],\"doc\":[],\"metric\":[],\"kn_entry\":[],\"knowledge_network\":[],\"advanced_config\":{\"kg\":null,\"doc\":null}},\"skills\":{\"tools\":[{\"tool_id\":\"cf6753b9-fba2-4c66-9cbe-27659087882b\",\"tool_box_id\":\"408b5319-eefc-445e-9b15-7d332f0706ee\",\"tool_timeout\":300,\"tool_input\":[{\"input_name\":\"x-account-id\",\"input_type\":\"string\",\"input_desc\":\"用户ID\",\"map_type\":\"var\",\"map_value\":\"header.x-account-id\",\"enable\":true},{\"input_name\":\"x-account-type\",\"input_type\":\"string\",\"input_desc\":\"账户类型\",\"map_type\":\"var\",\"map_value\":\"header.x-account-type\",\"enable\":true},{\"input_name\":\"query\",\"input_type\":\"string\",\"input_desc\":\"用户原始查询问题。用于 Agent 理解查询意图，生成逻辑属性所需的动态参数。\\n\\n**重要**: query 的内容会直接影响参数生成质量，应包含：\\n- 时间信息（如\\\"最近一年\\\"、\\\"2023年\\\"）\\n- 统计维度（如\\\"总数\\\"、\\\"趋势\\\"、\\\"分布\\\"）\\n- 业务上下文（帮助 Agent 理解查询目的）\\n\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"unique_identities\",\"input_type\":\"array\",\"input_desc\":\"要查询的对象实例主键数组（支持批量查询）。\\n\\n每个元素是一个键值对对象，包含该对象类的主键字段。\\n例如：[{\\\"company_id\\\": \\\"company_000001\\\"}, {\\\"company_id\\\": \\\"company_000002\\\"}]\\n\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"additional_context\",\"input_type\":\"string\",\"input_desc\":\"【可选】补充上下文信息，帮助 Agent 更准确地生成 dynamic_params。\\n\\n**何时需要提供**:\\n- query 中的时间信息模糊时（如\\\"最近\\\"需要明确为具体时间戳）\\n- 需要传递对象实例的关键属性值\\n- 需要指定特殊的查询模式（如即时查询 vs 趋势查询）\\n\\n**推荐格式**: 结构化的 JSON 字符串（也支持自由文本）\\n\\n**建议包含的信息**:\\n1. 时间信息：now_ms（当前时间戳毫秒）、timezone（时区）\\n2. 对象属性：对象实例的关键属性值（如 company_name、registered_capital）\\n3. 查询模式：instant（是否即时查询）、step（趋势查询的步长：day/week/month/quarter/year）\\n4. 筛选条件：业务约束条件（如 registered_capital > 1000000）\\n\\n**示例**:\\n```json\\n{\\n  \\\"now_ms\\\": 1765951609952,\\n  \\\"timezone\\\": \\\"Asia/Shanghai\\\",\\n  \\\"instant\\\": true,\\n  \\\"object_context\\\": {\\n    \\\"company_id\\\": \\\"company_000001\\\",\\n    \\\"company_name\\\": \\\"广西金秀圣堂药业有限责任公司\\\"\\n  }\\n}\\n```\\n\\n**注意**: 避免传递大段无关文本，保持信息精准和结构化。\\n\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"kn_id\",\"input_type\":\"string\",\"input_desc\":\"业务知识网络ID。例如：kn_medical（医疗领域）、kn_finance（金融领域）\\n\",\"map_type\":\"var\",\"map_value\":\"self_config.data_source.knowledge_network[0].knowledge_network_id\",\"enable\":true},{\"input_name\":\"options\",\"input_type\":\"object\",\"input_desc\":\"【可选配置】控制接口行为的高级选项\\n\",\"children\":[{\"input_name\":\"return_debug\",\"input_type\":\"boolean\",\"input_desc\":\"是否返回调试信息。设置为 true 时，响应中会包含 debug 字段，内容包括：\\n- dynamic_params: Agent 生成的所有动态参数\\n- now_ms: 服务器时间戳\\n- warnings: 警告信息（如有）\\n\\n**用途**: 调试参数生成逻辑、验证 Agent 行为\\n\",\"map_type\":\"fixedValue\",\"map_value\":\"true\",\"enable\":true},{\"input_name\":\"max_concurrency\",\"input_type\":\"integer\",\"input_desc\":\"当查询多个 properties 时，并发调用 Agent 生成参数的最大并发数。\\n\\n**说明**:\\n- 较小值（1-3）：降低服务压力，适合 Agent 响应较慢的情况\\n- 推荐值（4-6）：平衡性能和资源消耗\\n- 较大值（7-10）：加快处理速度，适合对响应时间敏感的场景\\n\\n**注意**: 过大的并发数可能导致 Agent 服务过载\\n\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":false},{\"input_name\":\"max_repair_rounds\",\"input_type\":\"integer\",\"input_desc\":\"当 Agent 返回的 JSON 格式不合法时，最大尝试修复的轮次。\\n\\n**说明**:\\n- 0 = 不进行修复，直接报错\\n- 1 = 尝试修复一次（推荐，默认值）\\n- 2+ = 多次修复尝试（可能增加延迟）\\n\\n**适用场景**: Agent 输出质量不稳定时可适当增加\\n\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":false}]},{\"input_name\":\"ot_id\",\"input_type\":\"string\",\"input_desc\":\"对象类ID。指定要查询的对象类型。例如：company（企业）、drug（药品）、person（人物）\\n\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"properties\",\"input_type\":\"array\",\"input_desc\":\"需要查询的逻辑属性名称列表。支持两种类型：\\n- **metric**: 指标属性（如药品上市数量、销售额趋势等）\\n- **operator**: 算子属性（如健康度评分、风险等级等）\\n\\n本接口会自动为每个属性生成 dynamic_params 并查询其值。\\n\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true}],\"intervention\":false,\"result_process_strategies\":null},{\"tool_id\":\"636c77ee-70ad-46a3-b68b-78b0ed2eb7c8\",\"tool_box_id\":\"408b5319-eefc-445e-9b15-7d332f0706ee\",\"tool_timeout\":300,\"tool_input\":[{\"input_name\":\"x-account-id\",\"input_type\":\"string\",\"input_desc\":\"账户 ID\",\"map_type\":\"var\",\"map_value\":\"header.x-account-id\",\"enable\":true},{\"input_name\":\"x-account-type\",\"input_type\":\"string\",\"input_desc\":\"账户类型\",\"map_type\":\"var\",\"map_value\":\"header.x-account-type\",\"enable\":true},{\"input_name\":\"at_id\",\"input_type\":\"string\",\"input_desc\":\"行动类型ID\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"kn_id\",\"input_type\":\"string\",\"input_desc\":\"业务知识网络ID\",\"map_type\":\"var\",\"map_value\":\"self_config.data_source.knowledge_network[0].knowledge_network_id\",\"enable\":true},{\"input_name\":\"unique_identity\",\"input_type\":\"object\",\"input_desc\":\"对象的唯一标识，键值对形式。\\n- key: 主键属性名\\n- value: 属性值（支持 string, number, boolean 类型）\\n\\n**注意：** 当前版本仅支持单个对象标识（unique_identity），不支持多个对象（unique_identities）\\n\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true}],\"intervention\":false,\"result_process_strategies\":null},{\"tool_id\":\"4b66ad66-4277-4d68-b847-c302c94265c9\",\"tool_box_id\":\"408b5319-eefc-445e-9b15-7d332f0706ee\",\"tool_timeout\":300,\"tool_input\":[{\"input_name\":\"x-account-id\",\"input_type\":\"string\",\"input_desc\":\"账户ID\",\"map_type\":\"var\",\"map_value\":\"header.x-account-id\",\"enable\":true},{\"input_name\":\"x-account-type\",\"input_type\":\"string\",\"input_desc\":\"账户类型\",\"map_type\":\"var\",\"map_value\":\"header.x-account-type\",\"enable\":true},{\"input_name\":\"kn_id\",\"input_type\":\"string\",\"input_desc\":\"业务知识网络ID\",\"map_type\":\"var\",\"map_value\":\"self_config.data_source.knowledge_network[0].knowledge_network_id\",\"enable\":true},{\"input_name\":\"ot_id\",\"input_type\":\"string\",\"input_desc\":\"对象类ID\",\"map_type\":\"auto\",\"enable\":true},{\"input_name\":\"include_type_info\",\"input_type\":\"boolean\",\"input_desc\":\"是否包含对象类信息, 默认false，不包含\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"include_logic_params\",\"input_type\":\"boolean\",\"input_desc\":\"包含逻辑属性的计算参数，默认false，返回结果不包含逻辑属性的字段和值\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"condition\",\"input_type\":\"object\",\"input_desc\":\"过滤条件结构，用于构建对象实例的查询筛选条件。\\n\\n**重要规则：**\\n- `value_from` 和 `value` 必须同时使用，不能单独使用\\n- `value_from` 当前仅支持 \\\"const\\\"（常量值）\\n- 当使用 `value_from: \\\"const\\\"` 时，必须同时提供 `value` 字段\\n\",\"children\":[{\"input_name\":\"sub_conditions\",\"input_type\":\"array\",\"input_desc\":\"子过滤条件数组，用于逻辑操作符(and/or)的组合查询\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"value\",\"input_type\":\"unknown\",\"input_desc\":\"字段值，格式根据操作符类型而定：\\n- 比较操作符: 单个值\\n- 范围查询: [min, max]数组\\n- 集合操作: 值数组\\n- 向量搜索: 特定格式数组\\n\\n**必须与 `value_from: \\\"const\\\"` 同时使用**\\n\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"value_from\",\"input_type\":\"string\",\"input_desc\":\"字段值来源。\\n\\n**重要：** 当前仅支持 \\\"const\\\"（常量值），且必须与 `value` 字段同时使用\\n\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"field\",\"input_type\":\"string\",\"input_desc\":\"字段名称，也即对象类的属性名称\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"operation\",\"input_type\":\"string\",\"input_desc\":\"查询条件操作符。\\n**注意：** 虽然这里列出了所有可能的操作符，但每个对象类实际支持的操作符列表以对象类定义中的 `condition_operations` 字段为准。\\n\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true}]},{\"input_name\":\"limit\",\"input_type\":\"integer\",\"input_desc\":\"返回的数量，默认值 10。范围 1-100\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"need_total\",\"input_type\":\"boolean\",\"input_desc\":\"是否需要总数，默认false\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"properties\",\"input_type\":\"array\",\"input_desc\":\"指定返回的对象属性字段列表，默认返回所有属性。\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"sort\",\"input_type\":\"array\",\"input_desc\":\"排序字段，默认使用 @timestamp排序，排序方向为 desc\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true}],\"intervention\":false,\"result_process_strategies\":null},{\"tool_id\":\"a666b98e-9278-401f-b4e5-e491bcaed3f8\",\"tool_box_id\":\"408b5319-eefc-445e-9b15-7d332f0706ee\",\"tool_timeout\":300,\"tool_input\":[{\"input_name\":\"x-account-id\",\"input_type\":\"string\",\"input_desc\":\"账户ID\",\"map_type\":\"var\",\"map_value\":\"header.x-account-id\",\"enable\":true},{\"input_name\":\"x-account-type\",\"input_type\":\"string\",\"input_desc\":\"账户类型\",\"map_type\":\"var\",\"map_value\":\"header.x-account-type\",\"enable\":true},{\"input_name\":\"kn_id\",\"input_type\":\"string\",\"input_desc\":\"业务知识网络ID\",\"map_type\":\"var\",\"map_value\":\"self_config.data_source.knowledge_network[0].knowledge_network_id\",\"enable\":true},{\"input_name\":\"include_logic_params\",\"input_type\":\"boolean\",\"input_desc\":\"包含逻辑属性的计算参数，默认false，返回结果不包含逻辑属性的字段和值\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":false},{\"input_name\":\"relation_type_paths\",\"input_type\":\"array\",\"input_desc\":\"关系类路径集合,数组中可以包含多条不同的关系路径，系统会同时查询并返回所有路径的结果。每条路径必须符合严格的顺序和方向要求。\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true}],\"intervention\":false,\"result_process_strategies\":null},{\"tool_id\":\"fe3f1f26-ff56-4f62-a5c7-a68d1e8ac2d7\",\"tool_box_id\":\"408b5319-eefc-445e-9b15-7d332f0706ee\",\"tool_timeout\":300,\"tool_input\":[{\"input_name\":\"x-account-id\",\"input_type\":\"string\",\"input_desc\":\"账户ID，用于内部服务调用时传递账户信息\",\"map_type\":\"var\",\"map_value\":\"header.x-account-id\",\"enable\":true},{\"input_name\":\"x-account-type\",\"input_type\":\"string\",\"input_desc\":\"账户类型：user(用户), app(应用), anonymous(匿名)\",\"map_type\":\"var\",\"map_value\":\"header.x-account-type\",\"enable\":true},{\"input_name\":\"kn_id\",\"input_type\":\"string\",\"input_desc\":\"指定的知识网络ID，必须传递\",\"map_type\":\"var\",\"map_value\":\"self_config.data_source.knowledge_network[0].knowledge_network_id\",\"enable\":true},{\"input_name\":\"only_schema\",\"input_type\":\"boolean\",\"input_desc\":\"是否只召回概念（schema），不召回语义实例。如果为True，则只返回object_types、relation_types和action_types，不返回nodes。\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"query\",\"input_type\":\"string\",\"input_desc\":\"用户查询问题或关键词，多个关键词之间用空格隔开\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"retrieval_config\",\"input_type\":\"object\",\"input_desc\":\"召回配置参数，用于控制不同类型的召回场景（概念召回、语义实例召回、属性过滤）。如果不提供，将使用系统默认配置。\",\"children\":[{\"input_name\":\"concept_retrieval\",\"input_type\":\"object\",\"input_desc\":\"概念召回/概念流程配置参数（原最外层参数已收敛到此处）\",\"children\":[{\"input_name\":\"return_union\",\"input_type\":\"boolean\",\"input_desc\":\"概念召回多轮检索时是否返回并集。True返回所有轮次并集；False仅返回当前轮次增量（默认False）。\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":false},{\"input_name\":\"schema_brief\",\"input_type\":\"boolean\",\"input_desc\":\"概念召回时是否返回精简schema。True仅返回必要字段（概念ID/名称/关系source&target），不返回大字段。\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":false}]}]},{\"input_name\":\"session_id\",\"input_type\":\"string\",\"input_desc\":\"会话ID，用于维护多轮对话存储的历史召回记录\",\"map_type\":\"var\",\"map_value\":\"self_config.conversation_id\",\"enable\":true},{\"input_name\":\"additional_context\",\"input_type\":\"string\",\"input_desc\":\"额外的上下文信息，用于二次检索时提供更精确的检索信息\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"enable_rerank\",\"input_type\":\"boolean\",\"input_desc\":\"是否启用重排序。如果为true，则启用重排序。\",\"map_type\":\"auto\",\"enable\":false}],\"intervention\":false,\"result_process_strategies\":null},{\"tool_id\":\"fcfaee61-7055-4847-bb45-60e5e22b02b0\",\"tool_box_id\":\"408b5319-eefc-445e-9b15-7d332f0706ee\",\"tool_timeout\":300,\"tool_input\":[{\"input_name\":\"x-account-id\",\"input_type\":\"string\",\"input_desc\":\"用户ID\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"x-account-type\",\"input_type\":\"string\",\"input_desc\":\"账户类型\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"kn_id\",\"input_type\":\"string\",\"input_desc\":\"业务知识网络ID\",\"map_type\":\"var\",\"map_value\":\"self_config.data_source.knowledge_network[0].knowledge_network_id\",\"enable\":true},{\"input_name\":\"max_concepts\",\"input_type\":\"integer\",\"input_desc\":\"最大返回概念数量\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":false},{\"input_name\":\"previous_queries\",\"input_type\":\"array\",\"input_desc\":\"之前的查询历史\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":false},{\"input_name\":\"query\",\"input_type\":\"string\",\"input_desc\":\"用户自然语言查询\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":true},{\"input_name\":\"rerank_action\",\"input_type\":\"string\",\"input_desc\":\"重排动作\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":false},{\"input_name\":\"return_query_understanding\",\"input_type\":\"boolean\",\"input_desc\":\"是否返回查询理解信息\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":false},{\"input_name\":\"search_scope\",\"input_type\":\"object\",\"input_desc\":\"\",\"children\":[{\"input_name\":\"include_action_types\",\"input_type\":\"boolean\",\"input_desc\":\"是否包含行作类\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":false},{\"input_name\":\"include_object_types\",\"input_type\":\"boolean\",\"input_desc\":\"是否包含对象类\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":false},{\"input_name\":\"include_relation_types\",\"input_type\":\"boolean\",\"input_desc\":\"是否包含关系类\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":false},{\"input_name\":\"concept_groups\",\"input_type\":\"array\",\"input_desc\":\"限定的概念分组\",\"map_type\":\"auto\",\"map_value\":\"\",\"enable\":false}]}],\"intervention\":false,\"result_process_strategies\":null}],\"agents\":[],\"mcps\":[]},\"llms\":[{\"is_default\":true,\"llm_config\":{\"id\":\"1991760467793678336\",\"name\":\"deepseekv3.1\",\"model_type\":\"llm\",\"temperature\":1,\"top_p\":1,\"top_k\":1,\"frequency_penalty\":0,\"presence_penalty\":0,\"max_tokens\":32000}}],\"is_data_flow_set_enabled\":0,\"opening_remark_config\":null,\"preset_questions\":[],\"output\":{\"variables\":{\"answer_var\":\"answer\",\"doc_retrieval_var\":\"doc_retrieval_res\",\"graph_retrieval_var\":\"graph_retrieval_res\",\"related_questions_var\":\"related_questions\",\"other_vars\":null,\"middle_output_vars\":null},\"default_format\":\"markdown\"},\"built_in_can_edit_fields\":null,\"memory\":{\"is_enabled\":false},\"related_question\":{\"is_enabled\":false},\"plan_mode\":null,\"metadata\":{\"config_tpl_version\":\"v1\",\"config_last_set_timestamp\":1767591245180213369}}",
      "created_type": "copy",
      "create_from": "dip"
    }
  ]
}