{
  "input_schema": {
    "type": "object",
    "properties": {
      "query": {
        "type": "string",
        "description": "用户查询问题或关键词，多个关键词之间用空格隔开"
      },
      "retrieval_config": {
        "type": "object",
        "description": "召回配置。不提供时使用系统默认",
        "properties": {
          "concept_retrieval": {
            "type": "object",
            "description": "概念召回配置",
            "properties": {
              "top_k": {
                "type": "integer",
                "minimum": 1,
                "default": 10,
                "description": "概念召回返回最相关关系类型数量（对象类型会随关系类型自动过滤）"
              },
              "schema_brief": {
                "type": "boolean",
                "default": true,
                "description": "概念召回时是否返回精简 schema。true 仅返回必要字段（概念ID/名称/关系 source&target）"
              },
              "include_sample_data": {
                "type": "boolean",
                "default": false,
                "description": "是否获取对象类型的样例数据。true 会为每个召回对象类型获取一条样例数据"
              }
            }
          }
        }
      },
      "only_schema": {
        "type": "boolean",
        "default": false,
        "description": "是否只召回概念，不召回语义实例"
      },
      "enable_rerank": {
        "type": "boolean",
        "default": true,
        "description": "是否对关系类型启用 Rerank"
      }
    },
    "required": ["query"]
  },
  "output_schema": {
    "type": "object",
    "properties": {
      "object_types": {
        "type": "array",
        "description": "对象类型列表（概念召回时返回）。精简模式含 concept_id、concept_name、data_properties、logic_properties；完整模式含 primary_keys、display_key、sample_data 等",
        "items": {
          "type": "object",
          "additionalProperties": true
        }
      },
      "relation_types": {
        "type": "array",
        "description": "关系类型列表（概念召回时返回）。含 concept_id、concept_name、source_object_type_id、target_object_type_id",
        "items": {
          "type": "object",
          "additionalProperties": true
        }
      },
      "action_types": {
        "type": "array",
        "description": "操作类型列表（概念召回时返回）。含 id、name、object_type_id、object_type_name、comment、tags、kn_id",
        "items": {
          "type": "object",
          "additionalProperties": true
        }
      },
      "nodes": {
        "type": "array",
        "description": "语义实例召回结果（召回到实例时返回）。每个节点至少含 object_type_id、instance_name、unique_identities、properties、score",
        "items": {
          "type": "object",
          "additionalProperties": true
        }
      },
      "message": {
        "type": "string",
        "description": "提示信息（例如未召回到实例数据时返回原因说明）"
      }
    }
  }
}
