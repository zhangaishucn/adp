openapi: 3.0.3
info:
  title: MCP服务公共接口
  version: 1.0.1
  description: |
    本OpenAPI文档包含MCP服务器配置管理接口、MCP Server Market接口、MCP Server Execute接口，涵盖服务端与执行端所有RESTful接口，便于统一查阅与开发。
servers:
  - url: http://localhost:8080
security:
  - BearerAuth: []
tags:
  - name: MCP Server Manage
    description: MCP Server 的注册、解析、删除、查询、详情、更新等接口
  - name: MCP Server Market
    description: MCP Server Market管理接口
paths:
  # 服务端接口
  /api/agent-operator-integration/v1/mcp/parse/sse:
    post:
      tags: [MCP Server Manage]
      summary: 解析SSE MCPServer
      parameters:
        - name: Authorization
          in: header
          required: true
          schema:
            type: string
          description: Bearer token，格式：Bearer <token>
        - name: x-business-domain
          in: header
          required: true
          schema:
            type: string
          description: 业务域ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MCPParseSSERequest"
      responses:
        "200":
          description: 成功返回工具列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MCPParseSSEResponse"
        "400":
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/agent-operator-integration/v1/mcp:
    post:
      tags: [MCP Server Manage]
      summary: 添加MCP Server配置
      parameters:
        - name: Authorization
          in: header
          required: true
          schema:
            type: string
          description: Bearer token，格式：Bearer <token>
        - name: x-business-domain
          in: header
          required: true
          schema:
            type: string
          description: 业务域ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MCPServerRegisterRequest"
            examples:
              customSSE:
                summary: 自定义SSE MCP Server
                value:
                  name: custom_sse_mcp_server
                  description: 自定义SSE MCP Server
                  creation_type: custom
                  category: other_category
                  mode: sse
                  url: http://localhost:8080
              customStream:
                summary: 自定义Stream MCP Server
                value:
                  name: custom_stream_mcp_server
                  description: 自定义Stream MCP Server
                  creation_type: custom
                  category: other_category
                  mode: stream
              toolImported:
                summary: 工具导入 MCP Server
                value:
                  name: tool_imported_mcp_server
                  description: 工具导入 MCP Server
                  creation_type: tool_imported
                  category: other_category
                  tool_configs:
                    - box_id: 1
                      tool_id: 1
                      box_name: 工具箱1
                      tool_name: 工具1
                      description: 工具1描述
                    - box_id: 2
                      tool_id: 2
      responses:
        "200":
          description: 注册成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  mcp_id:
                    type: string
                    description: MCP Server ID
                  status:
                    type: string
                    enum: [unpublish, published, offline, editing]
                    description: |
                      状态：
                      unpublish: 未发布
                      published: 已发布
                      offline: 已下架
                      editing: 发布编辑中
        "400":
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/agent-operator-integration/v1/mcp/list:
    get:
      tags: [MCP Server Manage]
      summary: 获取MCP Server列表
      parameters:
        - name: Authorization
          in: header
          required: true
          schema:
            type: string
          description: Bearer token，格式：Bearer <token>
        - name: x-business-domain
          in: header
          required: true
          schema:
            type: string
          description: 业务域ID
        - name: page
          in: query
          description: 页码，从1开始，默认为1
          schema:
            type: integer
            default: 1
            minimum: 1
        - name: page_size
          in: query
          description: 每页数量，默认为10
          schema:
            type: integer
            default: 10
            maximum: 100
        - name: status
          in: query
          description: 状态，unpublish:草稿，未发布; published:已发布; offline:已下线; editing:发布编辑中
          schema:
            type: string
            enum: [unpublish, published, offline, editing]
        - name: mode
          in: query
          description: 运行模式，sse, stream
          schema:
            type: string
            enum: [sse, stream]
        - name: name
          in: query
          description: MCP Server名称
          schema:
            type: string
        - name: category
          in: query
          description: 分类
          schema:
            type: string
        - name: sort_by
          in: query
          description: 排序字段
          schema:
            type: string
            enum: [create_time, update_time]
        - name: sort_order
          in: query
          description: 排序顺序
          schema:
            type: string
            enum: [asc, desc]
        - name: create_user
          in: query
          description: 创建者ID
          schema:
            type: string
        - name: is_internal
          in: query
          description: 是否为内置
          schema:
            type: boolean
            default: false
        - name: all
          in: query
          description: 是否返回所有信息
          schema:
            type: boolean
            default: false
      responses:
        "200":
          description: 成功返回MCP Server列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MCPServerListResponse"
        "400":
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/agent-operator-integration/v1/mcp/:mcp_id:
    get:
      tags: [MCP Server Manage]
      summary: 获取指定MCP服务的详情信息，包括服务基本信息等
      parameters:
        - name: Authorization
          in: header
          required: true
          schema:
            type: string
          description: Bearer token，格式：Bearer <token>
        - name: x-business-domain
          in: header
          required: true
          schema:
            type: string
          description: 业务域ID
        - name: mcp_id
          in: path
          required: true
          description: MCP Server ID
          schema:
            type: integer
      responses:
        "200":
          description: 成功返回MCP服务器配置
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MCPServerDetailResponse"
              examples:
                customSSE:
                  summary: 自定义SSE MCP Server
                  value:
                    base_info:
                      mcp_id: 1
                      name: custom_sse_mcp_server
                      description: 自定义SSE MCP Server
                      creation_type: custom
                      mode: sse
                      category: other_category
                    connection_info:
                      sse_url: "http://localhost:8080/api/agent-operator-integration/v1/mcp/app/1/sse?token=token信息"
                customStream:
                  summary: 自定义Stream MCP Server
                  value:
                    base_info:
                      mcp_id: 2
                      name: custom_stream_mcp_server
                      description: 自定义Stream MCP Server
                      creation_type: custom
                      mode: stream
                      category: other_category
                    connection_info:
                      stream_url: "http://localhost:8080/api/agent-operator-integration/v1/mcp/app/1/mcp?token=token信息"
                toolImported:
                  summary: 工具导入 MCP Server
                  value:
                    base_info:
                      mcp_id: 3
                      name: tool_imported_mcp_server
                      description: 工具导入 MCP Server
                      creation_type: tool_imported
                      category: other_category
                    tool_configs:
                      - box_id: 1
                        tool_id: 1
                        box_name: 工具箱1
                        tool_name: 工具1
                        description: 工具1描述
                      - box_id: 2
                        tool_id: 2
                    connection_info:
                      sse_url: "http://localhost:8080/api/agent-operator-integration/v1/mcp/app/1/sse?token=token信息"
                      stream_url: "http://localhost:8080/api/agent-operator-integration/v1/mcp/app/1/mcp?token=token信息"
        "404":
          description: 未找到MCP服务器
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    put:
      tags: [MCP Server Manage]
      summary: 编辑MCP Server配置
      parameters:
        - name: Authorization
          in: header
          required: true
          schema:
            type: string
          description: Bearer token，格式：Bearer <token>
        - name: x-business-domain
          in: header
          required: true
          schema:
            type: string
          description: 业务域ID
        - name: mcp_id
          in: path
          required: true
          description: MCP Server ID
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MCPServerUpdateRequest"
            examples:
              customSSE:
                summary: 自定义SSE MCP Server
                value:
                  name: custom_sse_mcp_server
                  description: 自定义SSE MCP Server
                  creation_type: custom
                  mode: sse
                  url: http://localhost:8080
                  category: other_category
              customStream:
                summary: 自定义Stream MCP Server
                value:
                  name: custom_stream_mcp_server
                  description: 自定义Stream MCP Server
                  creation_type: custom
                  mode: stream
                  category: other_category
              toolImported:
                summary: 工具导入 MCP Server
                value:
                  name: tool_imported_mcp_server
                  description: 工具导入 MCP Server
                  creation_type: tool_imported
                  category: other_category
                  tool_configs:
                    - box_id: 1
                      tool_id: 1
                      box_name: 工具箱1
                      tool_name: 工具1
                      description: 工具1描述
                    - box_id: 2
                      tool_id: 2
      responses:
        "200":
          description: 更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  mcp_id:
                    type: string
                    description: MCP Server ID
                  status:
                    type: string
                    enum: [unpublish, published, offline, editing]
                    description: |
                      状态：
                      unpublish: 未发布
                      published: 已发布
                      offline: 已下架
                      editing: 发布编辑中
        "400":
          description: 请求参数错误
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: 未找到MCP服务信息
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    delete:
      tags: [MCP Server Manage]
      summary: 删除MCP Server配置
      parameters:
        - name: Authorization
          in: header
          required: true
          schema:
            type: string
          description: Bearer token，格式：Bearer <token>
        - name: x-business-domain
          in: header
          required: true
          schema:
            type: string
          description: 业务域ID
        - name: mcp_id
          in: path
          required: true
          description: MCP Server ID
          schema:
            type: integer
      responses:
        "200":
          description: 删除成功
        "400":
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/agent-operator-integration/v1/mcp/{mcp_id}/status:
    post:
      tags: [MCP Server Manage]
      summary: MCP服务发布操作
      parameters:
        - name: Authorization
          in: header
          required: true
          schema:
            type: string
          description: Bearer token，格式：Bearer <token>
        - name: x-business-domain
          in: header
          required: true
          schema:
            type: string
          description: 业务域ID
        - name: mcp_id
          in: path
          required: true
          description: MCP Server ID
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  enum: [unpublish, published, offline, editing]
                  description: |
                    状态：
                    unpublish: 未发布
                    published: 已发布
                    offline: 已下线
                    editing: 发布编辑中

      responses:
        "200":
          description: 更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  mcp_id:
                    type: string
                    description: MCP Server ID
                  status:
                    type: string
                    enum: [unpublish, published, offline, editing]
                    description: |
                      状态：
                      unpublish: 未发布
                      published: 已发布
        "400":
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/agent-operator-integration/v1/mcp/{mcp_id}/tool/{tool_name}/debug:
    post:
      tags: [MCP Server Manage]
      summary: MCP工具调试
      parameters:
        - name: Authorization
          in: header
          required: true
          schema:
            type: string
          description: Bearer token，格式：Bearer <token>
        - name: x-business-domain
          in: header
          required: true
          schema:
            type: string
          description: 业务域ID
        - name: mcp_id
          in: path
          required: true
          description: MCP Server ID
          schema:
            type: string
        - name: tool_name
          in: path
          required: true
          description: 工具名称
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MCPToolDebugRequest"
      responses:
        "200":
          description: 工具调试结果
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MCPToolDebugResponse"
        "400":
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/agent-operator-integration/v1/mcp/market/list:
    get:
      tags: [MCP Server Market]
      summary: 获取已发布的MCP服务列表，用于市场展示和订阅
      parameters:
        - name: Authorization
          in: header
          required: true
          schema:
            type: string
          description: Bearer token，格式：Bearer <token>
        - name: x-business-domain
          in: header
          required: true
          schema:
            type: string
          description: 业务域ID
        - name: page
          in: query
          description: 页码，从1开始，默认为1
          schema:
            type: integer
            default: 1
            minimum: 1
        - name: page_size
          in: query
          description: 每页数量，默认为10
          schema:
            type: integer
            default: 10
            maximum: 100
        - name: mode
          in: query
          description: 运行模式，sse, stream
          schema:
            type: string
            enum: [sse, stream]
        - name: name
          in: query
          description: MCP Server名称
          schema:
            type: string
        - name: category
          in: query
          description: 分类
          schema:
            type: string
        - name: sort_by
          in: query
          description: 排序字段
          schema:
            type: string
            enum: [create_time, update_time]
        - name: sort_order
          in: query
          description: 排序顺序
          schema:
            type: string
            enum: [asc, desc]
        - name: create_user
          in: query
          description: 创建者ID
          schema:
            type: string
        - name: release_user
          in: query
          description: 发布者ID
          schema:
            type: string
        - name: is_internal
          in: query
          description: 是否为内置
          schema:
            type: boolean
            default: false
        - name: all
          in: query
          description: 是否返回所有信息
          schema:
            type: boolean
            default: false
      responses:
        "200":
          description: 成功返回MCP Server列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MCPServerReleaseListResponse"
        "400":
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/agent-operator-integration/v1/mcp/market/:mcp_id:
    get:
      tags: [MCP Server Market]
      summary: 获取已发布的MCP Server Market详情信息，包括服务基本信息等
      parameters:
        - name: Authorization
          in: header
          required: true
          schema:
            type: string
          description: Bearer token，格式：Bearer <token>
        - name: x-business-domain
          in: header
          required: true
          schema:
            type: string
          description: 业务域ID
        - name: mcp_id
          in: path
          required: true
          description: MCP Server ID
          schema:
            type: integer
      responses:
        "200":
          description: 成功返回MCP服务器配置
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MCPServerReleaseDetailResponse"
              examples:
                customSSE:
                  summary: 自定义SSE MCP Server
                  value:
                    base_info:
                      mcp_id: 1
                      name: custom_sse_mcp_server
                      description: 自定义SSE MCP Server
                      creation_type: custom
                      mode: sse
                      category: other_category
                    connection_info:
                      sse_url: "http://localhost:8080/api/agent-operator-integration/v1/mcp/app/1/sse?token=token信息"
                customStream:
                  summary: 自定义Stream MCP Server
                  value:
                    base_info:
                      mcp_id: 2
                      name: custom_stream_mcp_server
                      description: 自定义Stream MCP Server
                      creation_type: custom
                      mode: stream
                      category: other_category
                    connection_info:
                      stream_url: "http://localhost:8080/api/agent-operator-integration/v1/mcp/app/1/mcp?token=token信息"
                toolImported:
                  summary: 工具导入 MCP Server
                  value:
                    base_info:
                      mcp_id: 3
                      name: tool_imported_mcp_server
                      description: 工具导入 MCP Server
                      creation_type: tool_imported
                      category: other_category
                    connection_info:
                      sse_url: "http://localhost:8080/api/agent-operator-integration/v1/mcp/app/1/sse?token=token信息"
                      stream_url: "http://localhost:8080/api/agent-operator-integration/v1/mcp/app/1/mcp?token=token信息"
        "404":
          description: 未找到MCP服务器
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/agent-operator-integration/v1/mcp/market/batch/:mcp_ids/:fields:
    get:
      tags: [MCP Server Market]
      summary: 批量获取已发布的MCP Server Market详情信息，包括服务基本信息等
      parameters:
        - name: Authorization
          in: header
          required: true
          schema:
            type: string
          description: Bearer token，格式：Bearer <token>
        - name: x-business-domain
          in: header
          required: true
          schema:
            type: string
          description: 业务域ID
        - name: mcp_ids
          in: path
          required: true
          description: MCP Server ID列表，多个ID用逗号分隔
          schema:
            type: string
        - name: fields
          in: path
          required: true
          schema:
            type: string
          description: |-
            获取MCP信息字段名：（可任意组合，若获取多个，以逗号分隔）

            - `name` MCP Server名称
            - `description` 描述信息
            - `source` 来源
            - `category` 分类
            - `mode` 运行模式

            **示例：**
            - `name,description,source,category,mode` （表示获取所有字段）
            - `name,description` （表示获取name和description字段）
            - `name` （表示获取name字段）
      responses:
        "200":
          description: 成功返回MCP Server列表
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/MCPServerReleaseInfo"
        "400":
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  # 代理端接口
  /api/agent-operator-integration/v1/mcp/proxy/:mcp_id/tools:
    get:
      tags: [MCP Server Execute]
      summary: 获取指定MCP服务下的工具列表
      parameters:
        - name: Authorization
          in: header
          required: true
          schema:
            type: string
          description: Bearer token，格式：Bearer <token>
        - name: x-business-domain
          in: header
          required: true
          schema:
            type: string
          description: 业务域ID
        - name: mcp_id
          in: path
          description: MCP Server ID
          required: true
          schema:
            type: string
      responses:
        "200":
          description: 成功返回工具列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/McpProxyToolListResponse"
        "404":
          description: 未找到MCP服务
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/agent-operator-integration/v1/mcp/proxy/:mcp_id/tool/call:
    post:
      tags: [MCP Server Execute]
      summary: 调用指定MCP服务下的工具
      parameters:
        - name: Authorization
          in: header
          required: true
          schema:
            type: string
          description: Bearer token，格式：Bearer <token>
        - name: x-business-domain
          in: header
          required: true
          schema:
            type: string
          description: 业务域ID
        - name: mcp_id
          in: path
          description: MCP Server ID
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/McpProxyCallToolRequest"
      responses:
        "200":
          description: 成功返回工具调用结果（CallToolResult结构）
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/McpProxyCallToolResponse"
        "400":
          description: 工具调用参数错误
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: 工具执行或服务器内部错误
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    ErrorResponse:
      type: object
      properties:
        code:
          type: string
          description: 错误码
        description:
          type: string
          description: 错误描述
        detail:
          type: object
          description: 错误详情
        solution:
          type: string
          description: 解决方案
        link:
          type: string
          description: 错误链接
    Tool:
      type: object
      properties:
        name:
          type: string
          description: 工具名称
        description:
          type: string
          description: 工具描述
        inputSchema:
          $ref: "#/components/schemas/ToolInputSchema"
          description: 工具参数输入Schema，符合JSON Schema规范。详见ToolInputSchema结构说明。
        annotations:
          type: object
          description: 工具注解信息
          properties:
            title:
              type: string
              description: 工具标题
            readOnlyHint:
              type: boolean
              description: 是否只读
            destructiveHint:
              type: boolean
              description: 是否有破坏性
            idempotentHint:
              type: boolean
              description: 是否幂等
            openWorldHint:
              type: boolean
              description: 是否与外部世界交互
    ToolInputSchema:
      type: object
      description: 工具参数输入Schema，采用JSON Schema规范，便于前端自动生成参数填写表单、校验参数等。
      properties:
        type:
          type: string
          description: 参数类型，通常为object
        properties:
          type: object
          description: 参数属性定义，key为参数名，value为参数schema（支持type、enum、description等JSON Schema字段）
          additionalProperties: true
        required:
          type: array
          items:
            type: string
          description: 必填参数名列表
        $defs:
          type: object
          description: JSON Schema定义，用于定义可重用的schema片段，支持$ref引用
          additionalProperties: true
    TextContent:
      type: object
      properties:
        type:
          type: string
          enum: [text]
        text:
          type: string
    ImageContent:
      type: object
      properties:
        type:
          type: string
          enum: [image]
        data:
          type: string
        mimeType:
          type: string
    AudioContent:
      type: object
      properties:
        type:
          type: string
          enum: [audio]
        data:
          type: string
        mimeType:
          type: string
    EmbeddedResource:
      type: object
      properties:
        type:
          type: string
          enum: [resource]
        resource:
          type: object
    MCPServerRegisterRequest:
      type: object
      properties:
        name:
          type: string
          description: MCP Server名称
        description:
          type: string
          description: 描述信息
        creation_type:
          type: string
          description: "创建类型, custom: 自定义, tool_imported: 工具导入"
          enum: [custom, tool_imported]
        mode:
          type: string
          description: 运行模式
          enum: [sse, stream]
        command:
          type: string
          description: 运行命令
        args:
          type: array
          items:
            type: string
          description: 运行参数
        url:
          type: string
          description: 服务URL
        headers:
          type: object
          additionalProperties:
            type: string
          description: 请求头
        env:
          type: object
          additionalProperties:
            type: string
          description: 环境变量
        source:
          type: string
          description: 来源
        category:
          type: string
          description: 分类
        tool_configs:
          type: array
          description: 工具配置列表
          items:
            $ref: "#/components/schemas/MCPToolConfig"
      required: [name, mode]
    MCPServerUpdateRequest:
      type: object
      properties:
        name:
          type: string
          description: MCP Server名称
        description:
          type: string
          description: 描述信息
        creation_type:
          type: string
          description: "创建类型, custom: 自定义, tool_imported: 工具导入"
          enum: [custom, tool_imported]
        mode:
          type: string
          description: 运行模式
          enum: [sse, stream]
        url:
          type: string
          description: 服务URL
        headers:
          type: object
          additionalProperties:
            type: string
        command:
          type: string
          description: 运行命令
        env:
          type: object
          description: 环境变量
          additionalProperties:
            type: string
        args:
          type: array
          items:
            type: string
          description: 运行参数
        source:
          type: string
          description: 来源
        category:
          type: string
          description: 分类
        tool_configs:
          type: array
          items:
            $ref: "#/components/schemas/MCPToolConfig"
      required: [mode]
    MCPServerConfigInfo:
      type: object
      description: mcp server基本信息
      properties:
        business_domain_id:
          type: string
          description: 业务域Id
        mcp_id:
          type: string
          description: MCP Server ID
        name:
          type: string
          description: MCP Server名称
        description:
          type: string
          description: 描述信息
        creation_type:
          type: string
          description: "创建类型, custom: 自定义, tool_imported: 工具导入"
          enum: [custom, tool_imported]
        mode:
          type: string
          description: 运行模式
        url:
          type: string
          description: 服务URL
        headers:
          type: object
          additionalProperties:
            type: string
          description: 请求头
        command:
          type: string
          description: 运行命令
        env:
          type: object
          additionalProperties:
            type: string
          description: 环境变量
        args:
          type: array
          items:
            type: string
          description: 运行参数
        status:
          type: string
          description: 状态
          enum: [unpublish, published, offline, editing]
        is_internal:
          type: boolean
          description: "是否为内置"
        source:
          type: string
          description: 来源
        category:
          type: string
          description: 分类
        create_user:
          type: string
          description: 创建用户
        create_time:
          type: integer
          description: 创建时间
        update_user:
          type: string
          description: 更新用户
        update_time:
          type: integer
          description: 更新时间
    MCPServerReleaseInfo:
      type: object
      description: 已发布的MCP Server信息
      allOf:
        - $ref: "#/components/schemas/MCPServerConfigInfo"
        - type: object
          properties:
            release_user:
              type: string
              description: 发布用户
            release_time:
              type: integer
              description: 发布时间
    MCPConnectionInfo:
      type: object
      description: MCP Server连接信息
      properties:
        sse_url:
          type: string
          description: SSE连接URL
        stream_url:
          type: string
          description: Stream连接URL
    MCPServerListResponse:
      type: object
      properties:
        total:
          type: integer
          description: 总数
        page:
          type: integer
          description: 页码
        page_size:
          type: integer
          description: 每页数量
        total_pages:
          type: integer
          description: 总页数
        has_next:
          type: boolean
          description: 是否有下一页
        has_pre:
          type: boolean
          description: 是否有上一页
        data:
          type: array
          items:
            allOf:
              - $ref: "#/components/schemas/MCPServerConfigInfo"
              - type: object
                properties:
                  tool_configs:
                    type: array
                    description: 工具配置列表
                    items:
                      $ref: "#/components/schemas/MCPToolConfig"
    MCPServerDetailResponse:
      type: object
      properties:
        base_info:
          allOf:
            - $ref: "#/components/schemas/MCPServerConfigInfo"
            - type: object
              properties:
                tool_configs:
                  type: array
                  description: 工具配置列表
                  items:
                    $ref: "#/components/schemas/MCPToolConfig"
        connection_info:
          type: object
          description: MCP Server连接信息
          $ref: "#/components/schemas/MCPConnectionInfo"
    MCPServerReleaseListResponse:
      type: object
      properties:
        total:
          type: integer
          description: 总数
        page:
          type: integer
          description: 页码
        page_size:
          type: integer
          description: 每页数量
        total_pages:
          type: integer
          description: 总页数
        has_next:
          type: boolean
          description: 是否有下一页
        has_pre:
          type: boolean
          description: 是否有上一页
        data:
          type: array
          items:
            $ref: "#/components/schemas/MCPServerReleaseInfo"
    MCPServerReleaseDetailResponse:
      type: object
      properties:
        base_info:
          type: object
          description: MCP Server基本信息
          $ref: "#/components/schemas/MCPServerReleaseInfo"
        connection_info:
          type: object
          description: MCP Server连接信息
          $ref: "#/components/schemas/MCPConnectionInfo"
    MCPToolDebugRequest:
      type: object
      properties:
        parameters:
          type: object
          additionalProperties: true
          description: 工具请求参数
      required: [parameters]
    MCPToolDebugResponse:
      type: object
      properties:
        content:
          type: array
          description: 工具调用结果内容
          items:
            oneOf:
              - $ref: "#/components/schemas/TextContent"
              - $ref: "#/components/schemas/ImageContent"
              - $ref: "#/components/schemas/AudioContent"
              - $ref: "#/components/schemas/EmbeddedResource"
        isError:
          type: boolean
          description: 是否为错误
    MCPParseSSERequest:
      type: object
      properties:
        mode:
          type: string
          description: 运行模式
          enum: [sse, stream]
        url:
          type: string
          description: 请求URL
        headers:
          type: object
          additionalProperties:
            type: string
          description: 请求头
      required: [mode, url, headers]
    MCPParseSSEResponse:
      type: object
      properties:
        tools:
          type: array
          items:
            $ref: "#/components/schemas/Tool"
    McpProxyCallToolRequest:
      type: object
      properties:
        tool_name:
          type: string
          description: 工具名称
        parameters:
          type: object
          additionalProperties: true
          description: 工具请求参数
      required: [mcp_id, tool_name, parameters]
    McpProxyCallToolResponse:
      type: object
      properties:
        content:
          type: array
          description: 工具调用结果内容
          items:
            oneOf:
              - $ref: "#/components/schemas/TextContent"
              - $ref: "#/components/schemas/ImageContent"
              - $ref: "#/components/schemas/AudioContent"
              - $ref: "#/components/schemas/EmbeddedResource"
        isError:
          type: boolean
          description: 是否为错误
    McpProxyToolListResponse:
      type: object
      properties:
        tools:
          type: array
          items:
            $ref: "#/components/schemas/Tool"
    MCPToolConfig:
      type: object
      properties:
        box_id:
          type: string
          description: 工具箱ID
        tool_id:
          type: string
          description: 工具ID
        box_name:
          type: string
          description: 工具箱名称
        tool_name:
          type: string
          description: 工具名称
        description:
          type: string
          description: 工具描述
        use_rule:
          type: string
          description: 使用规则
