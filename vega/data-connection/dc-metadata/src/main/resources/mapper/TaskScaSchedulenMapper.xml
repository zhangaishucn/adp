<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.eisoo.dc.common.metadata.mapper.TaskScanScheduleMapper">
    <select id="selectTaskScans" resultType="com.eisoo.dc.common.metadata.entity.TaskScanScheduleEntity">
        SELECT id FROM t_task_scan_schedule
        WHERE 1=1
        <if test="dsId != null and dsId != ''">
            AND ds_id = #{dsId}
        </if>
        <if test="keyword != null and keyword != ''">
            AND name LIKE CONCAT('%', #{keyword}, '%')
        </if>
    </select>
    <update id="updateEntityById">
        UPDATE t_task_scan_schedule
        SET cron_expression = #{cronExpression},
            operation_user  = #{operationUser},
            operation_time  = #{operationTime},
            operation_type  = #{operationType},
            scan_strategy   = #{scanStrategy},
            task_status     = #{taskStatus}
        WHERE id = #{id}
    </update>
    <select id="selectByDsId" resultType="com.eisoo.dc.common.metadata.entity.TaskScanScheduleEntity">
        SELECT * FROM t_task_scan_schedule
        WHERE ds_id = #{dsId} limit 1
    </select>
</mapper>