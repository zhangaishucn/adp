# 名称空间，服务都要在同一个空间。
namespace: anyshare
name: vega-gateway-deployment

labels:
  deployment:
    name: vega-gateway-deployment
  pod:
    app: vega-gateway-pod
  service:
    app: vega-gateway-service

image:
  registry: acr.aishu.cn
  repository: dip/vega-gateway
  tag: "1.0.0-develop"
  pullPolicy: IfNotPresent

replicaCount: 1

nodeSelector: { }

service:
  name: vega-gateway
  type: ClusterIP
  port: 8099
  telemetry:
    log:
      enabled: false
      endpoint:  http://feed-ingester-service:13031/api/feed_ingester/v1/jobs/dip-o11y-log/events
      level: OFF
    trace:
      enabled: false
      endpoint: http://feed-ingester-service:13031/api/feed_ingester/v1/jobs/dip-o11y-trace/events

depServices:
  class-443:
    ingressClass: class-443
  rds:
    type: ""
    host: mariadb-mariadb-master.resource
    port: 3330
    user: anyshare
    password: eisoo.com123
  vega_calculate:
    service: vega-calculate-coordinator
    port: 8090
    timeout: 3000
    protocol: http
  vega_jdbc:
    host: 10.4.109.201
    port: 80
  vega_schedule:
    queued: TaskGroupMax20
    host: data-sync-connect
    port: 80
    engine_host: 10.4.109.243
    protocol: http
  authentication:
    publicHost: authentication-public
    publicPort: 30110
    publicProtocol: http
  dataView:
    host: data-view
    port: 8123
    protocol: http
  hydra:
    administrativeHost: hydra-admin
    administrativePort: 4445
    administrativeProtocol: http
    publicHost: hydra-public
    publicPort: 4444
    publicProtocol: http
  authService:
    host: auth-service
    port: 8155
    protocol: http
  efast:
    publicHost: efast-public
    publicPort: 9123
    publicProtocol: http
resources:
  requests:
    cpu: 200m
    memory: 256Mi
  limits:
    cpu: 8
    memory: 16Gi

probe:
  livenessProbe:
    httpGet:
      path: /api/virtual_engine_service/v1/health/alive
      port: 8099
    initialDelaySeconds: 30
    periodSeconds: 30
    timeoutSeconds: 60
    successThreshold: 1
    failureThreshold: 3
  readinessProbe:
    httpGet:
      path: /api/virtual_engine_service/v1/health/ready
      port: 8099
    initialDelaySeconds: 30
    periodSeconds: 30
    timeoutSeconds: 60
    successThreshold: 1
    failureThreshold: 3

collectorDataSource: mymaria_fast2 #扫描用数据源，列表过滤时使用